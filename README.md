# æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªè½»é‡ã€å®ç”¨çš„æ–‡ä»¶ç®¡ç†ç³»ç»Ÿã€‚ä»¥ç›®å½•éš”ç¦»ä¸ç¡¬é“¾æ¥å…±äº«ä¸ºæ ¸å¿ƒï¼Œæä¾›ä¸Šä¼ /ä¸‹è½½ã€åœ¨çº¿ç¼–è¾‘ä¸ç®€æ´çš„å…±äº«èƒ½åŠ›ã€‚

## ğŸš€ é¡¹ç›®èƒŒæ™¯

æ–‡ä»¶ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºPython Flaskçš„ç°ä»£åŒ–Webåº”ç”¨ï¼Œä¸“ä¸ºè§£å†³å›¢é˜Ÿæ–‡ä»¶å…±äº«å’Œç®¡ç†éœ€æ±‚è€Œè®¾è®¡ã€‚ç³»ç»Ÿé‡‡ç”¨ç¡¬é“¾æ¥æŠ€æœ¯å®ç°é›¶æ‹·è´æ–‡ä»¶å…±äº«ï¼Œç¡®ä¿å­˜å‚¨æ•ˆç‡çš„åŒæ—¶æä¾›å®Œæ•´çš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- **ğŸ”’ ç›®å½•éš”ç¦»**: æ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ç‹¬ç«‹çš„ `home/users/<username>` å·¥ä½œåŒºï¼Œç¡®ä¿æ•°æ®å®‰å…¨
- **ğŸ”— ç¡¬é“¾æ¥å…±äº«**: å°†æ–‡ä»¶å…±äº«åˆ° `home/shared/<username>_shared`ï¼Œåªè¯»ã€é›¶æ‹·è´ã€èŠ‚çœå­˜å‚¨ç©ºé—´
- **ğŸ“ åœ¨çº¿ç¼–è¾‘**: å†…ç½®ä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒè¯­æ³•é«˜äº®ï¼Œå¸¸ç”¨æ–‡æœ¬/ä»£ç ç›´æ¥åœ¨çº¿ç¼–è¾‘
- **ğŸ“ åŸºç¡€æ“ä½œ**: å®Œæ•´çš„æ–‡ä»¶æµè§ˆã€ä¸Šä¼ ã€ä¸‹è½½ã€é‡å‘½åã€åˆ é™¤ã€ç§»åŠ¨åŠŸèƒ½
- **ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤**: è·¯å¾„æ ¡éªŒã€ç±»å‹æ£€æŸ¥ã€æ“ä½œæ—¥å¿—ã€æƒé™æ§åˆ¶
- **ğŸŒ ç°ä»£åŒ–UI**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œç¾è§‚æ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢
- **âš™ï¸ å¤šç¯å¢ƒé…ç½®**: æ”¯æŒå¼€å‘ã€ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼Œçµæ´»éƒ¨ç½²

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.8+, Flask, SQLAlchemy
- **å‰ç«¯**: HTML5, CSS3, JavaScript (ES6+), CodeMirror
- **æ•°æ®åº“**: MySQL, Redis
- **å­˜å‚¨**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ + ç¡¬é“¾æ¥
- **éƒ¨ç½²**: æ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²

## ğŸ“¦ å®‰è£…è¯´æ˜

### ç³»ç»Ÿè¦æ±‚

- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- MySQL 5.7+ æˆ– MariaDB 10.2+
- Redis 5.0+
- æ”¯æŒç¡¬é“¾æ¥çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆNTFSã€ext4ç­‰ï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/file_manager.git
cd file_manager
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒ

å¤åˆ¶å¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
```bash
cp config/development.yaml config/local.yaml
# ç¼–è¾‘ config/local.yaml å’Œ config/environment.txt
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
python scripts/init_database.py
```

### 5. å¯åŠ¨åº”ç”¨

```bash
python main.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒå¯åŠ¨

```bash
# è®¾ç½®ç¯å¢ƒä¸ºå¼€å‘æ¨¡å¼
echo "development" > config/environment.txt

# å¯åŠ¨åº”ç”¨
python main.py
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# è®¾ç½®ç¯å¢ƒä¸ºç”Ÿäº§æ¨¡å¼
echo "production" > config/environment.txt

# ä½¿ç”¨ç”Ÿäº§é…ç½®å¯åŠ¨
python main.py
```

### è®¿é—®åœ°å€

- **ä¸»é¡µ**: `http://localhost:8888`
- **æ–‡ä»¶ç®¡ç†**: `http://localhost:8888/files`
- **åœ¨çº¿ç¼–è¾‘å™¨**: `http://localhost:8888/editor`
- **å…±äº«æ–‡ä»¶**: `http://localhost:8888/shared`
- **ç”¨æˆ·ç®¡ç†**: `http://localhost:8888/admin`

## ğŸ“š ä½¿ç”¨æŒ‡å—

### æ–‡ä»¶ç®¡ç†

1. **ä¸Šä¼ æ–‡ä»¶**: æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶
2. **åˆ›å»ºæ–‡ä»¶å¤¹**: ç‚¹å‡»"æ–°å»ºæ–‡ä»¶å¤¹"æŒ‰é’®
3. **æ–‡ä»¶æ“ä½œ**: å³é”®æ–‡ä»¶/æ–‡ä»¶å¤¹è¿›è¡Œå¤åˆ¶ã€ç§»åŠ¨ã€åˆ é™¤ç­‰æ“ä½œ
4. **æ‰¹é‡æ“ä½œ**: é€‰æ‹©å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰¹é‡å¤„ç†

### æ–‡ä»¶å…±äº«

1. **é€‰æ‹©æ–‡ä»¶**: åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­é€‰æ‹©è¦å…±äº«çš„æ–‡ä»¶
2. **è®¾ç½®æƒé™**: é€‰æ‹©å…±äº«æƒé™ï¼ˆåªè¯»/è¯»å†™ï¼‰
3. **ç”Ÿæˆé“¾æ¥**: ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå…±äº«é“¾æ¥
4. **åˆ†äº«é“¾æ¥**: å°†é“¾æ¥å‘é€ç»™éœ€è¦è®¿é—®çš„ç”¨æˆ·

### åœ¨çº¿ç¼–è¾‘

1. **æ‰“å¼€æ–‡ä»¶**: ç‚¹å‡»æ–‡ä»¶æˆ–ä½¿ç”¨ç¼–è¾‘å™¨é¡µé¢
2. **ç¼–è¾‘å†…å®¹**: åœ¨CodeMirrorç¼–è¾‘å™¨ä¸­ä¿®æ”¹æ–‡ä»¶
3. **ä¿å­˜æ›´æ”¹**: æŒ‰Ctrl+Sæˆ–ç‚¹å‡»ä¿å­˜æŒ‰é’®
4. **ç‰ˆæœ¬æ§åˆ¶**: ç³»ç»Ÿè‡ªåŠ¨è®°å½•æ–‡ä»¶ä¿®æ”¹å†å²

## ğŸ”Œ API æ–‡æ¡£

### è®¤è¯æ¥å£

```http
POST /api/auth/login
POST /api/auth/register
POST /api/auth/logout
GET  /api/auth/profile
```

### æ–‡ä»¶ç®¡ç†æ¥å£

```http
GET    /api/files/list          # è·å–æ–‡ä»¶åˆ—è¡¨
POST   /api/files/upload        # ä¸Šä¼ æ–‡ä»¶
GET    /api/files/download      # ä¸‹è½½æ–‡ä»¶
PUT    /api/files/rename        # é‡å‘½åæ–‡ä»¶
DELETE /api/files/delete        # åˆ é™¤æ–‡ä»¶
POST   /api/files/move          # ç§»åŠ¨æ–‡ä»¶
POST   /api/files/copy          # å¤åˆ¶æ–‡ä»¶
```

### å…±äº«æ¥å£

```http
POST   /api/sharing/share       # åˆ›å»ºå…±äº«
DELETE /api/sharing/unshare     # å–æ¶ˆå…±äº«
GET    /api/sharing/shared      # è·å–å…±äº«åˆ—è¡¨
GET    /api/sharing/access      # è®¿é—®å…±äº«æ–‡ä»¶
```

### ç¼–è¾‘å™¨æ¥å£

```http
GET    /api/editor/open         # æ‰“å¼€æ–‡ä»¶ç¼–è¾‘
POST   /api/editor/save         # ä¿å­˜æ–‡ä»¶
GET    /api/editor/history      # è·å–ç¼–è¾‘å†å²
```

## ğŸ—‚ï¸ ç›®å½•ç»“æ„è¯¦è§£

```
file_manager/
â”œâ”€â”€ api/                    # åç«¯APIè·¯ç”±
â”‚   â”œâ”€â”€ routes/            # å…·ä½“è·¯ç”±å®ç°
â”‚   â”‚   â”œâ”€â”€ auth.py        # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ file_ops.py    # æ–‡ä»¶æ“ä½œAPI
â”‚   â”‚   â”œâ”€â”€ upload.py      # æ–‡ä»¶ä¸Šä¼ API
â”‚   â”‚   â”œâ”€â”€ download.py    # æ–‡ä»¶ä¸‹è½½API
â”‚   â”‚   â”œâ”€â”€ editor.py      # ç¼–è¾‘å™¨API
â”‚   â”‚   â””â”€â”€ sharing.py     # æ–‡ä»¶å…±äº«API
â”‚   â””â”€â”€ __init__.py        # APIæ¨¡å—åˆå§‹åŒ–
â”œâ”€â”€ core/                   # åº”ç”¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ app.py             # Flaskåº”ç”¨å®ä¾‹
â”‚   â”œâ”€â”€ config.py          # é…ç½®åŸºç±»
â”‚   â””â”€â”€ config_manager.py  # é…ç½®ç®¡ç†å™¨
â”œâ”€â”€ services/               # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ auth_service.py    # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ file_service.py    # æ–‡ä»¶æœåŠ¡
â”‚   â”œâ”€â”€ upload_service.py  # ä¸Šä¼ æœåŠ¡
â”‚   â”œâ”€â”€ download_service.py # ä¸‹è½½æœåŠ¡
â”‚   â”œâ”€â”€ editor_service.py  # ç¼–è¾‘å™¨æœåŠ¡
â”‚   â”œâ”€â”€ sharing_service.py # å…±äº«æœåŠ¡
â”‚   â””â”€â”€ mysql_service.py   # æ•°æ®åº“æœåŠ¡
â”œâ”€â”€ templates/              # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µæ¨¡æ¿
â”‚   â”œâ”€â”€ editor.html        # ç¼–è¾‘å™¨æ¨¡æ¿
â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ shared_files.html  # å…±äº«æ–‡ä»¶é¡µé¢
â”œâ”€â”€ static/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/               # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                # JavaScriptæ–‡ä»¶
â”‚   â””â”€â”€ fonts/             # å­—ä½“æ–‡ä»¶
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml        # ä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ development.yaml   # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ production.yaml    # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ environment.txt    # ç¯å¢ƒæ ‡è¯†æ–‡ä»¶
â”œâ”€â”€ scripts/                # ç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ init_database.py   # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ setup_auth.py      # è®¤è¯è®¾ç½®
â”‚   â””â”€â”€ manage_config.py   # é…ç½®ç®¡ç†
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ auth_middleware.py # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ file_utils.py      # æ–‡ä»¶å·¥å…·
â”‚   â””â”€â”€ logger.py          # æ—¥å¿—å·¥å…·
â””â”€â”€ home/                   # ç”¨æˆ·æ•°æ®ç›®å½•
    â”œâ”€â”€ users/              # ç”¨æˆ·ä¸ªäººç›®å½•
    â””â”€â”€ shared/             # å…±äº«æ–‡ä»¶ç›®å½•
```

## ğŸ”§ é…ç½®è¯´æ˜

ç³»ç»Ÿæ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼Œè¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ [é…ç½®æ–‡æ¡£](docs/CONFIGURATION.md)ã€‚

### å…³é”®é…ç½®é¡¹

- **æœåŠ¡å™¨é…ç½®**: ä¸»æœºåœ°å€ã€ç«¯å£ã€å·¥ä½œè¿›ç¨‹æ•°
- **æ•°æ®åº“é…ç½®**: MySQLè¿æ¥å‚æ•°ã€Redisé…ç½®
- **å®‰å…¨é…ç½®**: å¯†é’¥ã€ä¼šè¯è¶…æ—¶ã€é€Ÿç‡é™åˆ¶
- **å­˜å‚¨é…ç½®**: æ–‡ä»¶ä¸Šä¼ é™åˆ¶ã€å­˜å‚¨è·¯å¾„

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t file-manager .

# è¿è¡Œå®¹å™¨
docker run -d -p 8888:8888 \
  -v /path/to/data:/app/home \
  -v /path/to/config:/app/config \
  file-manager
```

### ä¼ ç»Ÿéƒ¨ç½²

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒ
cp config/production.yaml config/local.yaml
# ç¼–è¾‘é…ç½®æ–‡ä»¶

# å¯åŠ¨åº”ç”¨
python main.py
```

### åå‘ä»£ç†é…ç½®

Nginxé…ç½®ç¤ºä¾‹ï¼š
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:8888;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
python -m pytest tests/

# é›†æˆæµ‹è¯•
python -m pytest tests/integration/

# è¦†ç›–ç‡æµ‹è¯•
python -m pytest --cov=app tests/
```

### æ€§èƒ½æµ‹è¯•

```bash
# ä½¿ç”¨abè¿›è¡Œå‹åŠ›æµ‹è¯•
ab -n 1000 -c 10 http://localhost:8888/

# ä½¿ç”¨wrkè¿›è¡Œè´Ÿè½½æµ‹è¯•
wrk -t12 -c400 -d30s http://localhost:8888/
```

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—é…ç½®

- åº”ç”¨æ—¥å¿—: `logs/file_manager.log`
- è®¿é—®æ—¥å¿—: `logs/access.log`
- é”™è¯¯æ—¥å¿—: `logs/error.log`

### æ€§èƒ½ç›‘æ§

- è¯·æ±‚å“åº”æ—¶é—´
- æ–‡ä»¶æ“ä½œæ€§èƒ½
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/file_manager.git

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œä»£ç æ£€æŸ¥
flake8 .
black .
isort .
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-01-XX)
- âœ¨ å…¨æ–°çš„ç°ä»£åŒ–UIè®¾è®¡
- ğŸ”’ å¢å¼ºçš„å®‰å…¨ç‰¹æ€§
- ğŸ“± å“åº”å¼è®¾è®¡æ”¯æŒ
- ğŸš€ æ€§èƒ½ä¼˜åŒ–

### v1.5.0 (2024-12-XX)
- ğŸ”— ç¡¬é“¾æ¥å…±äº«åŠŸèƒ½
- ğŸ“ åœ¨çº¿ä»£ç ç¼–è¾‘å™¨
- ğŸ›¡ï¸ æƒé™æ§åˆ¶ç³»ç»Ÿ

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) è®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/your-username/file_manager
- **é—®é¢˜åé¦ˆ**: https://github.com/your-username/file_manager/issues
- **é‚®ç®±**: support@filemanager.local

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼

